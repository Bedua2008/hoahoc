<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Th√≠ nghi·ªám H√≥a h·ªçc</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes bubble {
            0% { transform: translateY(0) scale(0); opacity: 1; }
            50% { transform: translateY(-20px) scale(1); opacity: 0.8; }
            100% { transform: translateY(-40px) scale(0); opacity: 0; }
        }
        
        @keyframes explosion {
            0% { transform: scale(1) rotate(0deg); }
            25% { transform: scale(1.3) rotate(5deg); }
            50% { transform: scale(1.1) rotate(-5deg); }
            75% { transform: scale(1.2) rotate(3deg); }
            100% { transform: scale(1) rotate(0deg); }
        }
        
        @keyframes dissolve {
            0% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(0.8); }
            100% { opacity: 0.3; transform: scale(0.6); }
        }
        
        @keyframes fizz {
            0%, 100% { transform: translateY(0) scale(1); }
            25% { transform: translateY(-5px) scale(1.1); }
            50% { transform: translateY(-10px) scale(0.9); }
            75% { transform: translateY(-3px) scale(1.05); }
        }
        
        @keyframes glow {
            0%, 100% { box-shadow: 0 0 5px rgba(59, 130, 246, 0.5); }
            50% { box-shadow: 0 0 20px rgba(59, 130, 246, 0.8), 0 0 30px rgba(59, 130, 246, 0.6); }
        }
        
        .bubble-animation {
            animation: bubble 1s ease-out infinite;
        }
        
        .explosion-animation {
            animation: explosion 0.8s ease-out infinite;
        }
        
        .dissolve-animation {
            animation: dissolve 2s ease-out infinite alternate;
        }
        
        .fizz-animation {
            animation: fizz 0.6s ease-in-out infinite;
        }
        
        .glow-animation {
            animation: glow 1.5s ease-in-out infinite;
        }
        
        .result-enter {
            animation: slideIn 0.5s ease-out;
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .substance-btn {
            transition: all 0.3s ease;
        }
        
        .substance-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-purple-50 min-h-screen">
    <div class="container mx-auto p-6 max-w-4xl">
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-gray-800 mb-2">üß™ Th√≠ nghi·ªám H√≥a h·ªçc</h1>
            <p class="text-gray-600">Kh√°m ph√° c√°c ph·∫£n ·ª©ng h√≥a h·ªçc th√∫ v·ªã!</p>
        </div>

        <!-- Experiment Type Selection -->
        <div class="flex justify-center gap-4 mb-8">
            <button id="metal-acid-btn" class="experiment-btn bg-blue-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors">
                ‚ö° Kim lo·∫°i + Axit
            </button>
            <button id="fat-ester-btn" class="experiment-btn bg-purple-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-purple-700 transition-colors opacity-50">
                üßº Ch·∫•t b√©o & Este
            </button>
        </div>

        <!-- Experiment Area -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
            <!-- Left Panel - First Substance -->
            <div class="bg-white rounded-xl shadow-lg p-6">
                <div class="text-center mb-4">
                    <div class="text-4xl mb-2" id="left-icon">‚öóÔ∏è</div>
                    <h3 class="text-xl font-semibold text-gray-800" id="left-title">Ch·ªçn Kim Lo·∫°i</h3>
                </div>
                <div class="grid grid-cols-1 gap-3" id="left-options">
                    <button class="substance-btn" data-value="Na" data-type="choice1">
                        <span class="font-bold">Na</span> - Natri
                    </button>
                    <button class="substance-btn" data-value="Zn" data-type="choice1">
                        <span class="font-bold">Zn</span> - K·∫Ωm
                    </button>
                    <button class="substance-btn" data-value="Cu" data-type="choice1">
                        <span class="font-bold">Cu</span> - ƒê·ªìng
                    </button>
                </div>
            </div>

            <!-- Right Panel - Second Substance -->
            <div class="bg-white rounded-xl shadow-lg p-6">
                <div class="text-center mb-4">
                    <div class="text-4xl mb-2" id="right-icon">üß™</div>
                    <h3 class="text-xl font-semibold text-gray-800" id="right-title">Ch·ªçn Axit</h3>
                </div>
                <div class="grid grid-cols-1 gap-3" id="right-options">
                    <button class="substance-btn" data-value="HCl" data-type="choice2">
                        <span class="font-bold">HCl</span> - Axit Clohidric
                    </button>
                    <button class="substance-btn" data-value="H2SO4" data-type="choice2">
                        <span class="font-bold">H‚ÇÇSO‚ÇÑ</span> - Axit Sunfuric
                    </button>
                </div>
            </div>
        </div>

        <!-- Experiment Button -->
        <div class="text-center mb-8">
            <button id="experiment-btn" class="bg-green-600 text-white px-8 py-4 rounded-xl font-bold text-lg hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">
                üî¨ Ti·∫øn h√†nh th√≠ nghi·ªám
            </button>
        </div>

        <!-- Result Area -->
        <div id="result-area" class="hidden">
            <div class="bg-gradient-to-r from-yellow-100 to-orange-100 rounded-xl shadow-lg p-6 border-l-4 border-yellow-500">
                <h3 class="text-xl font-semibold text-gray-800 mb-3">üéØ K·∫øt qu·∫£ th√≠ nghi·ªám:</h3>
                <div id="result-content" class="text-lg text-gray-700"></div>
                <div id="animation-area" class="mt-4 text-center"></div>
            </div>
        </div>

        <!-- Reset Button -->
        <div class="text-center mt-6">
            <button id="reset-btn" class="bg-gray-600 text-white px-6 py-2 rounded-lg hover:bg-gray-700 transition-colors">
                üîÑ L√†m l·∫°i th√≠ nghi·ªám
            </button>
        </div>
    </div>

    <script>
        let currentExperiment = 'metal-acid';
        let choice1 = null;
        let choice2 = null;

        const experiments = {
            'metal-acid': {
                leftTitle: 'Ch·ªçn Kim Lo·∫°i',
                rightTitle: 'Ch·ªçn Axit',
                leftIcon: '‚öóÔ∏è',
                rightIcon: 'üß™',
                leftOptions: [
                    { value: 'Na', label: '<span class="font-bold">Na</span> - Natri', color: 'bg-yellow-100' },
                    { value: 'Zn', label: '<span class="font-bold">Zn</span> - K·∫Ωm', color: 'bg-gray-100' },
                    { value: 'Cu', label: '<span class="font-bold">Cu</span> - ƒê·ªìng', color: 'bg-orange-100' }
                ],
                rightOptions: [
                    { value: 'HCl', label: '<span class="font-bold">HCl</span> - Axit Clohidric', color: 'bg-green-100' },
                    { value: 'H2SO4', label: '<span class="font-bold">H‚ÇÇSO‚ÇÑ</span> - Axit Sunfuric', color: 'bg-blue-100' }
                ]
            },
            'fat-ester': {
                leftTitle: 'Ch·ªçn Ch·∫•t b√©o / Este',
                rightTitle: 'Ch·ªçn T√°c nh√¢n',
                leftIcon: 'üßà',
                rightIcon: '‚öóÔ∏è',
                leftOptions: [
                    { value: 'Tristearin', label: '<span class="font-bold">Tristearin</span> - Ch·∫•t b√©o no (m·ª° ƒë·ªông v·∫≠t)', color: 'bg-red-100' },
                    { value: 'Triolein', label: '<span class="font-bold">Triolein</span> - Ch·∫•t b√©o kh√¥ng no (d·∫ßu th·ª±c v·∫≠t)', color: 'bg-green-100' },
                    { value: 'Tripalmitin', label: '<span class="font-bold">Tripalmitin</span> - Ch·∫•t b√©o no (d·∫ßu c·ªç)', color: 'bg-orange-100' },
                    { value: 'Trilinolein', label: '<span class="font-bold">Trilinolein</span> - Ch·∫•t b√©o kh√¥ng no (d·∫ßu h∆∞·ªõng d∆∞∆°ng)', color: 'bg-yellow-100' },
                    { value: 'EthylAcetate', label: '<span class="font-bold">CH‚ÇÉCOOC‚ÇÇH‚ÇÖ</span> - Etyl axetat (m√πi chu·ªëi)', color: 'bg-yellow-200' },
                    { value: 'MethylSalicylate', label: '<span class="font-bold">C‚ÇàH‚ÇàO‚ÇÉ</span> - Metyl salixylat (d·∫ßu gi√≥)', color: 'bg-purple-100' },
                    { value: 'EthylButyrate', label: '<span class="font-bold">C‚ÇÉH‚ÇáCOOC‚ÇÇH‚ÇÖ</span> - Etyl butyrat (m√πi d·ª©a)', color: 'bg-pink-100' },
                    { value: 'IsoamylAcetate', label: '<span class="font-bold">CH‚ÇÉCOOC‚ÇÖH‚ÇÅ‚ÇÅ</span> - Isoamyl axetat (m√πi chu·ªëi ch√≠n)', color: 'bg-amber-100' },
                    { value: 'MethylAnthranilate', label: '<span class="font-bold">C‚ÇàH‚ÇâNO‚ÇÉ</span> - Metyl anthranilat (m√πi nho)', color: 'bg-indigo-100' },
                    { value: 'EthylCinnamate', label: '<span class="font-bold">C‚ÇÜH‚ÇÖCH=CHCOOC‚ÇÇH‚ÇÖ</span> - Etyl cinnamat (m√πi qu·∫ø)', color: 'bg-rose-100' }
                ],
                rightOptions: [
                    { value: 'NaOH', label: '<span class="font-bold">NaOH</span> - Dung d·ªãch NaOH (x√† ph√≤ng h√≥a)', color: 'bg-blue-100' },
                    { value: 'H2O_acid', label: '<span class="font-bold">H‚ÇÇO + H‚Å∫</span> - Th·ªßy ph√¢n trong m√¥i tr∆∞·ªùng axit', color: 'bg-orange-100' },
                    { value: 'H2O_base', label: '<span class="font-bold">H‚ÇÇO + OH‚Åª</span> - Th·ªßy ph√¢n trong m√¥i tr∆∞·ªùng baz∆°', color: 'bg-green-100' }
                ]
            }
        };

        function switchExperiment(type) {
            currentExperiment = type;
            choice1 = null;
            choice2 = null;
            
            // Update button states
            document.querySelectorAll('.experiment-btn').forEach(btn => {
                btn.classList.remove('opacity-50');
                btn.classList.add('opacity-50');
            });
            document.getElementById(`${type}-btn`).classList.remove('opacity-50');
            
            // Update panels
            const exp = experiments[type];
            document.getElementById('left-title').textContent = exp.leftTitle;
            document.getElementById('right-title').textContent = exp.rightTitle;
            document.getElementById('left-icon').textContent = exp.leftIcon;
            document.getElementById('right-icon').textContent = exp.rightIcon;
            
            // Update options
            updateOptions('left-options', exp.leftOptions, 'choice1');
            updateOptions('right-options', exp.rightOptions, 'choice2');
            
            // Hide result
            document.getElementById('result-area').classList.add('hidden');
            updateExperimentButton();
        }

        function updateOptions(containerId, options, choiceType) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';
            
            options.forEach(option => {
                const button = document.createElement('button');
                button.className = `substance-btn ${option.color}`;
                button.setAttribute('data-value', option.value);
                button.setAttribute('data-type', choiceType);
                button.innerHTML = option.label;
                container.appendChild(button);
            });
        }

        function updateExperimentButton() {
            const btn = document.getElementById('experiment-btn');
            btn.disabled = !choice1 || !choice2;
        }

        function performExperiment() {
            if (!choice1 || !choice2) return;

            let result = '';
            let equation = '';
            let animation = '';

            if (currentExperiment === 'metal-acid') {
                if (choice1 === 'Na' && choice2 === 'HCl') {
                    result = 'üí• Ph·∫£n ·ª©ng r·∫•t m·∫°nh! Natri tan ngay l·∫≠p t·ª©c, c√≥ ti·∫øng n·ªï, kh√≠ H‚ÇÇ b·ªëc l√™n v√† b·∫Øt ch√°y t·∫°o ng·ªçn l·ª≠a v√†ng!';
                    equation = '2Na + 2HCl ‚Üí 2NaCl + H‚ÇÇ‚Üë + nhi·ªát';
                    animation = createReactionAnimation(['üü°', 'üü¢'], ['‚ö°', 'üí•', 'üî•'], ['üßÇ', 'üí®']);
                } else if (choice1 === 'Na' && choice2 === 'H2SO4') {
                    result = 'üí• Ph·∫£n ·ª©ng c·ª±c m·∫°nh v√† nguy hi·ªÉm! Natri tan ngay, c√≥ ti·∫øng n·ªï l·ªõn, kh√≠ H‚ÇÇ b·ªëc l√™n v√† b·∫Øt ch√°y!';
                    equation = '2Na + H‚ÇÇSO‚ÇÑ ‚Üí Na‚ÇÇSO‚ÇÑ + H‚ÇÇ‚Üë + nhi·ªát';
                    animation = createReactionAnimation(['üü°', 'üîµ'], ['‚ö°', 'üí•', 'üî•'], ['üßÇ', 'üí®']);
                } else if (choice1 === 'Zn' && choice2 === 'HCl') {
                    result = '‚ú® K·∫Ωm tan d·∫ßn, c√≥ b·ªçt kh√≠ H‚ÇÇ nh·ªè li ti b·ªëc l√™n ƒë·ªÅu ƒë·∫∑n, dung d·ªãch n√≥ng l√™n.';
                    equation = 'Zn + 2HCl ‚Üí ZnCl‚ÇÇ + H‚ÇÇ‚Üë';
                    animation = createReactionAnimation(['‚ö™', 'üü¢'], ['üíß', 'üí®'], ['üíß', 'üí®']);
                } else if (choice1 === 'Zn' && choice2 === 'H2SO4') {
                    result = '‚ú® K·∫Ωm tan t·ª´ t·ª´, c√≥ b·ªçt kh√≠ H‚ÇÇ b·ªëc l√™n, dung d·ªãch tr·ªü n√™n trong su·ªët.';
                    equation = 'Zn + H‚ÇÇSO‚ÇÑ ‚Üí ZnSO‚ÇÑ + H‚ÇÇ‚Üë';
                    animation = createReactionAnimation(['‚ö™', 'üîµ'], ['üíß', 'üí®'], ['üíß', 'üí®']);
                } else if (choice1 === 'Cu') {
                    result = '‚ùå Kh√¥ng c√≥ ph·∫£n ·ª©ng. ƒê·ªìng kh√¥ng tan trong axit HCl ho·∫∑c H‚ÇÇSO‚ÇÑ lo√£ng ·ªü nhi·ªát ƒë·ªô th∆∞·ªùng.';
                    equation = 'Kh√¥ng c√≥ ph·∫£n ·ª©ng (Cu k√©m ho·∫°t ƒë·ªông)';
                    animation = '<div class="text-4xl animate-pulse">üî∂ ‚û°Ô∏è üî∂</div>';
                }
            } else if (currentExperiment === 'fat-ester') {
                // Ch·∫•t b√©o reactions
                if (choice1 === 'Tristearin' && choice2 === 'NaOH') {
                    result = 'üßº X√† ph√≤ng h√≥a! Ch·∫•t b√©o tan d·∫ßn, t·∫°o th√†nh x√† ph√≤ng c·ª©ng (natri stearat) v√† glycerin. H·ªón h·ª£p tr·ªü n√™n ƒë·∫∑c v√† c√≥ t√≠nh ki·ªÅm.';
                    equation = 'C‚ÇÖ‚ÇáH‚ÇÅ‚ÇÅ‚ÇÄO‚ÇÜ + 3NaOH ‚Üí 3C‚ÇÅ‚ÇáH‚ÇÉ‚ÇÖCOONa + C‚ÇÉH‚ÇàO‚ÇÉ';
                    animation = createSoapAnimation();
                } else if (choice1 === 'Triolein' && choice2 === 'NaOH') {
                    result = 'üßº X√† ph√≤ng h√≥a! D·∫ßu th·ª±c v·∫≠t t·∫°o th√†nh x√† ph√≤ng m·ªÅm (natri oleat) v√† glycerin. S·∫£n ph·∫©m c√≥ t√≠nh ki·ªÅm.';
                    equation = 'C‚ÇÖ‚ÇáH‚ÇÅ‚ÇÄ‚ÇÑO‚ÇÜ + 3NaOH ‚Üí 3C‚ÇÅ‚ÇáH‚ÇÉ‚ÇÉCOONa + C‚ÇÉH‚ÇàO‚ÇÉ';
                    animation = createSoapAnimation();
                } else if (choice1 === 'Tripalmitin' && choice2 === 'NaOH') {
                    result = 'üßº X√† ph√≤ng h√≥a! D·∫ßu c·ªç t·∫°o th√†nh x√† ph√≤ng c·ª©ng (natri palmitat) v√† glycerin. S·∫£n ph·∫©m c√≥ m√†u tr·∫Øng ƒë·ª•c.';
                    equation = 'C‚ÇÖ‚ÇÅH‚Çâ‚ÇàO‚ÇÜ + 3NaOH ‚Üí 3C‚ÇÅ‚ÇÖH‚ÇÉ‚ÇÅCOONa + C‚ÇÉH‚ÇàO‚ÇÉ';
                    animation = createSoapAnimation();
                } else if (choice1 === 'Trilinolein' && choice2 === 'NaOH') {
                    result = 'üßº X√† ph√≤ng h√≥a! D·∫ßu h∆∞·ªõng d∆∞∆°ng t·∫°o th√†nh x√† ph√≤ng m·ªÅm (natri linoleat) v√† glycerin. S·∫£n ph·∫©m c√≥ m√†u v√†ng nh·∫°t.';
                    equation = 'C‚ÇÖ‚ÇáH‚Çâ‚ÇàO‚ÇÜ + 3NaOH ‚Üí 3C‚ÇÅ‚ÇáH‚ÇÉ‚ÇÅCOONa + C‚ÇÉH‚ÇàO‚ÇÉ';
                    animation = createSoapAnimation();
                
                // Este th∆°m reactions
                } else if (choice1 === 'EthylAcetate' && choice2 === 'NaOH') {
                    result = 'üíß Th·ªßy ph√¢n baz∆°! M√πi chu·ªëi bi·∫øn m·∫•t d·∫ßn, t·∫°o th√†nh natri axetat v√† etanol.';
                    equation = 'CH‚ÇÉCOOC‚ÇÇH‚ÇÖ + NaOH ‚Üí CH‚ÇÉCOONa + C‚ÇÇH‚ÇÖOH';
                    animation = createHydrolysisAnimation('üçå', 'üíß');
                } else if (choice1 === 'EthylAcetate' && choice2 === 'H2O_acid') {
                    result = 'üçã Th·ªßy ph√¢n axit! M√πi chu·ªëi y·∫øu d·∫ßn, t·∫°o th√†nh axit axetic v√† etanol.';
                    equation = 'CH‚ÇÉCOOC‚ÇÇH‚ÇÖ + H‚ÇÇO ‚Üí CH‚ÇÉCOOH + C‚ÇÇH‚ÇÖOH';
                    animation = createHydrolysisAnimation('üçå', 'üçã');
                } else if (choice1 === 'EthylButyrate' && choice2 === 'NaOH') {
                    result = 'üçç Th·ªßy ph√¢n baz∆°! M√πi d·ª©a bi·∫øn m·∫•t, t·∫°o th√†nh natri butyrat v√† etanol.';
                    equation = 'C‚ÇÉH‚ÇáCOOC‚ÇÇH‚ÇÖ + NaOH ‚Üí C‚ÇÉH‚ÇáCOONa + C‚ÇÇH‚ÇÖOH';
                    animation = createHydrolysisAnimation('üçç', 'üíß');
                } else if (choice1 === 'EthylButyrate' && choice2 === 'H2O_acid') {
                    result = 'üßà Th·ªßy ph√¢n axit! M√πi d·ª©a y·∫øu d·∫ßn, t·∫°o th√†nh axit butyric v√† etanol.';
                    equation = 'C‚ÇÉH‚ÇáCOOC‚ÇÇH‚ÇÖ + H‚ÇÇO ‚Üí C‚ÇÉH‚ÇáCOOH + C‚ÇÇH‚ÇÖOH';
                    animation = createHydrolysisAnimation('üçç', 'üßà');
                } else if (choice1 === 'IsoamylAcetate' && choice2 === 'NaOH') {
                    result = 'üçå Th·ªßy ph√¢n baz∆°! M√πi chu·ªëi ch√≠n bi·∫øn m·∫•t, t·∫°o th√†nh natri axetat v√† isoamyl alcohol.';
                    equation = 'CH‚ÇÉCOOC‚ÇÖH‚ÇÅ‚ÇÅ + NaOH ‚Üí CH‚ÇÉCOONa + C‚ÇÖH‚ÇÅ‚ÇÅOH';
                    animation = createHydrolysisAnimation('üçå', 'üíß');
                } else if (choice1 === 'IsoamylAcetate' && choice2 === 'H2O_acid') {
                    result = 'üçã Th·ªßy ph√¢n axit! M√πi chu·ªëi ch√≠n y·∫øu d·∫ßn, t·∫°o th√†nh axit axetic v√† isoamyl alcohol.';
                    equation = 'CH‚ÇÉCOOC‚ÇÖH‚ÇÅ‚ÇÅ + H‚ÇÇO ‚Üí CH‚ÇÉCOOH + C‚ÇÖH‚ÇÅ‚ÇÅOH';
                    animation = createHydrolysisAnimation('üçå', 'üçã');
                } else if (choice1 === 'MethylAnthranilate' && choice2 === 'NaOH') {
                    result = 'üçá Th·ªßy ph√¢n baz∆°! M√πi nho bi·∫øn m·∫•t, t·∫°o th√†nh natri anthranilat v√† metanol.';
                    equation = 'C‚ÇàH‚ÇâNO‚ÇÉ + NaOH ‚Üí C‚ÇáH‚ÇÜNO‚ÇÉNa + CH‚ÇÉOH';
                    animation = createHydrolysisAnimation('üçá', 'üíß');
                } else if (choice1 === 'MethylAnthranilate' && choice2 === 'H2O_acid') {
                    result = 'üíä Th·ªßy ph√¢n axit! M√πi nho y·∫øu d·∫ßn, t·∫°o th√†nh axit anthranilic v√† metanol.';
                    equation = 'C‚ÇàH‚ÇâNO‚ÇÉ + H‚ÇÇO ‚Üí C‚ÇáH‚ÇáNO‚ÇÇ + CH‚ÇÉOH';
                    animation = createHydrolysisAnimation('üçá', 'üíä');
                } else if (choice1 === 'EthylCinnamate' && choice2 === 'NaOH') {
                    result = 'üåø Th·ªßy ph√¢n baz∆°! M√πi qu·∫ø bi·∫øn m·∫•t, t·∫°o th√†nh natri cinnamat v√† etanol.';
                    equation = 'C‚ÇÜH‚ÇÖCH=CHCOOC‚ÇÇH‚ÇÖ + NaOH ‚Üí C‚ÇÜH‚ÇÖCH=CHCOONa + C‚ÇÇH‚ÇÖOH';
                    animation = createHydrolysisAnimation('üåø', 'üíß');
                } else if (choice1 === 'EthylCinnamate' && choice2 === 'H2O_acid') {
                    result = 'üå∂Ô∏è Th·ªßy ph√¢n axit! M√πi qu·∫ø y·∫øu d·∫ßn, t·∫°o th√†nh axit cinnamic v√† etanol.';
                    equation = 'C‚ÇÜH‚ÇÖCH=CHCOOC‚ÇÇH‚ÇÖ + H‚ÇÇO ‚Üí C‚ÇÜH‚ÇÖCH=CHCOOH + C‚ÇÇH‚ÇÖOH';
                    animation = createHydrolysisAnimation('üåø', 'üå∂Ô∏è');
                } else if (choice1 === 'MethylSalicylate' && choice2 === 'NaOH') {
                    result = 'üíä Th·ªßy ph√¢n baz∆°! M√πi d·∫ßu gi√≥ bi·∫øn m·∫•t, t·∫°o th√†nh natri salixylat v√† metanol.';
                    equation = 'C‚ÇàH‚ÇàO‚ÇÉ + NaOH ‚Üí C‚ÇáH‚ÇÖO‚ÇÉNa + CH‚ÇÉOH';
                    animation = createHydrolysisAnimation('üåø', 'üíä');
                } else if (choice1 === 'MethylSalicylate' && choice2 === 'H2O_acid') {
                    result = 'üíä Th·ªßy ph√¢n axit! M√πi d·∫ßu gi√≥ y·∫øu d·∫ßn, t·∫°o th√†nh axit salixilic v√† metanol.';
                    equation = 'C‚ÇàH‚ÇàO‚ÇÉ + H‚ÇÇO ‚Üí C‚ÇáH‚ÇÜO‚ÇÉ + CH‚ÇÉOH';
                    animation = createHydrolysisAnimation('üåø', 'üíä');
                } else {
                    result = '‚ùì Ph·∫£n ·ª©ng x·∫£y ra ch·∫≠m ho·∫∑c kh√¥ng r√µ r√†ng trong ƒëi·ªÅu ki·ªán n√†y.';
                    equation = 'C·∫ßn ƒëi·ªÅu ki·ªán ph√π h·ª£p (nhi·ªát ƒë·ªô, x√∫c t√°c)';
                    animation = '<div class="text-4xl animate-pulse">ü§î</div>';
                }
            }

            // Show result with equation
            document.getElementById('result-content').innerHTML = `
                <div class="mb-3">${result}</div>
                <div class="bg-white p-3 rounded-lg border-l-4 border-blue-500">
                    <strong>Ph∆∞∆°ng tr√¨nh ph·∫£n ·ª©ng:</strong><br>
                    <code class="text-lg font-mono">${equation}</code>
                </div>
            `;
            document.getElementById('animation-area').innerHTML = animation;
            document.getElementById('result-area').classList.remove('hidden');
            document.getElementById('result-area').classList.add('result-enter');
        }

        function createReactionAnimation(reactants, process, products) {
            return `
                <div class="flex items-center justify-center gap-4 text-3xl">
                    <div class="flex gap-2">${reactants.map(r => `<span class="animate-bounce">${r}</span>`).join('')}</div>
                    <span>+</span>
                    <div class="flex gap-2">${process.map(p => `<span class="animate-ping">${p}</span>`).join('')}</div>
                    <span>‚Üí</span>
                    <div class="flex gap-2">${products.map(p => `<span class="animate-pulse">${p}</span>`).join('')}</div>
                </div>
            `;
        }

        function createSoapAnimation() {
            return `
                <div class="flex items-center justify-center gap-4 text-3xl">
                    <span class="animate-bounce">üßà</span>
                    <span>+</span>
                    <span class="animate-bounce">‚öóÔ∏è</span>
                    <span class="animate-ping">üî•</span>
                    <span>‚Üí</span>
                    <span class="animate-pulse">üßº</span>
                    <span>+</span>
                    <span class="animate-pulse">üçØ</span>
                </div>
                <div class="mt-2 text-sm text-gray-600">Ch·∫•t b√©o + NaOH ‚Üí X√† ph√≤ng + Glycerin</div>
            `;
        }

        function createHydrolysisAnimation(from, to) {
            return `
                <div class="flex items-center justify-center gap-4 text-3xl">
                    <span class="animate-bounce">${from}</span>
                    <span>+</span>
                    <span class="animate-bounce">üíß</span>
                    <span class="animate-ping">‚ö°</span>
                    <span>‚Üí</span>
                    <span class="animate-pulse">${to}</span>
                    <span>+</span>
                    <span class="animate-pulse">üç∑</span>
                </div>
                <div class="mt-2 text-sm text-gray-600">Este + H‚ÇÇO ‚Üí Axit + Ancol</div>
            `;
        }

        function resetExperiment() {
            choice1 = null;
            choice2 = null;
            document.querySelectorAll('.substance-btn').forEach(btn => {
                btn.classList.remove('bg-blue-600', 'text-white');
                btn.classList.add('bg-gray-100', 'text-gray-700');
            });
            document.getElementById('result-area').classList.add('hidden');
            updateExperimentButton();
        }

        // Event listeners
        document.getElementById('metal-acid-btn').addEventListener('click', () => switchExperiment('metal-acid'));
        document.getElementById('fat-ester-btn').addEventListener('click', () => switchExperiment('fat-ester'));
        document.getElementById('experiment-btn').addEventListener('click', performExperiment);
        document.getElementById('reset-btn').addEventListener('click', resetExperiment);

        // Substance button clicks
        document.addEventListener('click', (e) => {
            if (e.target.classList.contains('substance-btn')) {
                const value = e.target.getAttribute('data-value');
                const type = e.target.getAttribute('data-type');
                
                // Remove selection from siblings
                e.target.parentElement.querySelectorAll('.substance-btn').forEach(btn => {
                    btn.classList.remove('bg-blue-600', 'text-white');
                    btn.classList.add('bg-gray-100', 'text-gray-700');
                });
                
                // Add selection to clicked button
                e.target.classList.remove('bg-gray-100', 'text-gray-700');
                e.target.classList.add('bg-blue-600', 'text-white');
                
                // Update choice
                if (type === 'choice1') {
                    choice1 = value;
                } else {
                    choice2 = value;
                }
                
                updateExperimentButton();
            }
        });

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            // Style substance buttons
            const style = document.createElement('style');
            style.textContent = `
                .substance-btn {
                    @apply w-full p-3 rounded-lg border-2 border-gray-200 bg-gray-100 text-gray-700 hover:border-blue-300 hover:bg-blue-50 transition-all cursor-pointer text-left;
                }
            `;
            document.head.appendChild(style);
            
            switchExperiment('metal-acid');
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97eea738d547933e',t:'MTc1NzgzOTk5OS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>



